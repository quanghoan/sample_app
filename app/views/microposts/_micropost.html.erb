
<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="content">
  	<%= micropost.content %>
  	<%= image_tag micropost.picture.url if micropost.picture? %>
  </span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    <% if current_user?(micropost.user)   %>
      <%= link_to '<i class="glyphicon glyphicon-trash"></i>'.html_safe, micropost, method: :delete, data: {confirm: "you sure?"} %>
    <% end %>	
    | <%= link_to '<i class="glyphicon glyphicon-comment"></i>'.html_safe, micropost_path(micropost) %>

    <div>
      <div class="votes">
        <% if current_user.liked? micropost %>
          <%= link_to "Unlike",dislike_micropost_path(micropost), method: :get, remote: true, class: 'unlike_post' %>
        <% else %>
            <%= link_to "Like", like_micropost_path(micropost), method: :get, remote: true, class: 'like_post' %>
        <% end %>
      </div>

      <div class="vote_count">
        <%=link_to micropost.get_likes.size, "#" %> 
      </div>      
    </div>  

  </span>  
</li>

<span class="timestamp">
  <% micropost.comments.each do |comment| %>
    <% unless comment.user.nil? %>
      <%=link_to comment.user.name, comment.user %> commented <%= time_ago_in_words(comment.created_at) %> ago. 
        <% if current_user?(comment.user) %>
          <%= link_to '<i class="glyphicon glyphicon-trash"></i> '.html_safe, [micropost, comment],  method: :delete, data: {confirm: "you sure?"} %>
        <% end %>
         
        <li class="comment"><%=comment.content %></li>
    <% end %>  
  <% end %>  

  <%= form_for([micropost, micropost.comments.build]) do |f| %>
    <div>
      <%=f.text_field :content, placeholder: "add comment", style: "width:430px" %>
    </div>   
  <% end %>
</span>


